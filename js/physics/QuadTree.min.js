function QuadTree(l,m,h,k){this.AABB=l;this.l=m;this.bodies=[];this.AABBs=[];this.nodes=[];this.qtd=0;this.maxl=h;this.maxo=k;this.clear=function(){this.qtd=0;this.bodies=[];this.AABBs=[];var b=this.nodes.length,a;for(a=0;a<b;a++)void 0!=this.nodes[a]&&0<this.nodes[a].qtd&&this.nodes[a].clear()};this.getAABBsGroups=function(b){b=void 0==b?[]:b;if(0<this.bodies.length&&1<this.qtd)b.push([this.bodies,this.AABBs]);else{var a=this.nodes.length,c;for(c=0;c<a;c++)this.nodes[c].getAABBsGroups(b)}return b};
    this.addBody=function(b,a){a=void 0==a?getAABB(b):a;if(this.qtd<=k||this.l==h)this.bodies.push(b),this.AABBs.push(a);else{void 0==this.nodes[0]&&this.split();var c=this.bodies.length;if(0<c){var d;for(d=0;d<c;d++)this.insert(this.bodies[d],this.AABBs[d]);this.bodies=[];this.AABBs=[]}this.insert(b,a)}this.qtd++};this.removeBody=function(b){var a=!1;if(0<this.bodies.length&&0<this.qtd)b=this.bodies.indexOf(b),-1!=b&&(this.bodies.splice(b,1),this.AABBs.splice(b,1),a=!0);else{var c=this.nodes.length,
        d,e;for(e=0;e<c;e++)d=this.nodes[e],null!=d&&d.removeBody(b)&&(a=!0)}a&&this.qtd--;return a};this.insert=function(b,a){var c,d=this.nodes.length,e;for(c=0;c<d;c++)e=this.nodes[c],AABBoverlap(e.AABB,a,0)&&e.addBody(b,a)};this.split=function(){var b=this.AABB[0],a=this.AABB[1],c=this.AABB[2],d=this.AABB[3],e=b+(c-b)/2,f=a+(d-a)/2,g=this.l+1;this.nodes[0]=new QuadTree([b,a,e,f],g,this.maxl,this.maxo);this.nodes[1]=new QuadTree([e,a,c,f],g,this.maxl,this.maxo);this.nodes[2]=new QuadTree([e,f,c,d],g,this.maxl,
        this.maxo);this.nodes[3]=new QuadTree([b,f,e,d],g,this.maxl,this.maxo)}};