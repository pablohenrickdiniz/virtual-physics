(function(){for(var a=0,c=["ms","moz","webkit","o"],b=0;b<c.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[c[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[b]+"CancelAnimationFrame"]||window[c[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);a=d+e;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();
function Game(){this.world=new World;this.canvas=new Canvas("game");this.quad=new Canvas("quad");this.running=!1;this.readFrame=null;this.reader=CanvasMouseReader;this.start=function(){this.reader.start();this.restart()};this.pause=function(){this.running&&(this.running=!1,clearInterval(this.readFrame))};this.restart=function(){this.running||(this.running=!0,this.loop(this))};this.loop=function(a){a.running&&setTimeout(function(){requestAnimationFrame(function(){a.loop(a)});a.world.step();a.canvas.drawWorld(a.world);
a.quad.drawQuadTree(a.world.quadTree)},1E3*a.dt)};this.getMouse=function(){var a=MV.VpV(this.reader.vertex,this.canvas.min);return MV.VdV(a,[this.canvas.scale,this.canvas.scale])}};
