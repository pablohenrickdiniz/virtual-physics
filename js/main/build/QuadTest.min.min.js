define(["AppObject","Game","chart","Rect","Regular","Body","Color","Material","QuadTree"],function(q,r,n,t,m,l,s,o,p){var k=function(){var a=this;a.time=null;a.lastDate=null;a.game=null;a.chart=null;a.bodiesQtd=[0,10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200];a.datasets=[];a.medias=[];a.labels=[];a.atualSet=0;a.bodiesTest=[];a.gameOptions={container:"#canvas-a",loopCallback:function(){if(!a.lastDate){a.set({lastDate:Date.now(),time:0})}else{var b=Date.now();var d=b-a.lastDate;a.set({time:d,lastDate:b});var e=a.bodiesTest.length;var c=a.bodiesQtd.indexOf(e);if(c!=-1){a.datasets[a.atualSet].data[c]=a.time}}}}};k.prototype=new q;k.prototype.getChart=function(){var b=this;if(b.chart==null){var c=$("#chart")[0].getContext("2d");var a=n.noConflict();b.chart=new a(c)}return b.chart};k.prototype.updateChart=function(){var a=this;a.getChart().Line({labels:a.bodiesQtd,datasets:a.datasets})};k.prototype.getGame=function(){var a=this;if(a.game==null){a.game=new r(a.gameOptions)}return a.game};k.prototype.test=function(f,h){var i=this;f=f==undefined?1:f;h=h==undefined?1:h;p.maxl=h;p.maxo=f;var j=i.getGame();var d=new l({shape:new t({width:80,height:500,center:[100,300]}),material:o.Iron,dinamic:false});var g=new l({shape:new t({width:80,height:500,center:[600,300]}),material:o.Iron,dinamic:false});var c=new l({shape:new t({width:580,height:80,center:[350,590]}),material:o.Iron,dinamic:false});var a="dataset - max objects-"+f+" - level -"+h;var b={label:a,fillColor:"transparent",strokeColor:s.random(),pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};i.datasets.push(b);i.atualSet=i.datasets.length-1;j.initialize(i.gameOptions);j.start();i.updateChart();j.getWorld().add(d).add(d).add(g).add(c);var e=setInterval(function(){var z=new l({shape:new t({width:10,height:10,center:[300,200]}),material:o.Iron,dinamic:true});j.getWorld().add(z);i.bodiesTest.push(z);$("#obj-qtd").html("qtd: "+i.bodiesTest.length);if(j.getWorld().bodies.length>220){clearInterval(e);j.getWorld().clear();j.pause();i.bodiesTest=[];h++;if(h>5){h=1;f+=1}if(f<=5){var A=0;i.datasets[i.atualSet].data.forEach(function(u){A+=u});var D=Math.round(A/21);i.medias[i.atualSet]=D;i.labels[i.atualSet]=a;console.log(i.labels[i.atualSet]+" checked. average time is "+D);var B=null;var C=null;i.medias.forEach(function(v,u){if(B==null||B>v){B=v;C=u}});$("#best").html("atual best is "+i.labels[C]);i.test(f,h)}else{var B=null;var C=null;i.medias.forEach(function(v,u){if(B==null||B>v){B=v;C=u}});console.log("best is "+i.labels[C]+" with average time "+B)}}},50)};k.prototype.initialize=function(){var a=this;a.test()};return new k()});