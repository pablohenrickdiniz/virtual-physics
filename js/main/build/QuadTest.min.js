define(["AppObject","Game","chart","Rect","Regular","Body","Color","Material","QuadTree"],function(d,c,g,a,h,i,b,f,e){var j=function(){var k=this;k.time=null;k.lastDate=null;k.game=null;k.chart=null;k.bodiesQtd=[0,10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200];k.datasets=[];k.medias=[];k.labels=[];k.atualSet=0;k.bodiesTest=[];k.gameOptions={container:"#canvas-a",loopCallback:function(){if(!k.lastDate){k.set({lastDate:Date.now(),time:0})}else{var m=Date.now();var o=m-k.lastDate;k.set({time:o,lastDate:m});var n=k.bodiesTest.length;var l=k.bodiesQtd.indexOf(n);if(l!=-1){k.datasets[k.atualSet].data[l]=k.time}}}}};j.prototype=new d;j.prototype.getChart=function(){var l=this;if(l.chart==null){var k=$("#chart")[0].getContext("2d");var m=g.noConflict();l.chart=new m(k)}return l.chart};j.prototype.updateChart=function(){var k=this;k.getChart().Line({labels:k.bodiesQtd,datasets:k.datasets})};j.prototype.getGame=function(){var k=this;if(k.game==null){k.game=new c(k.gameOptions)}return k.game};j.prototype.test=function(m,k){var t=this;m=m==undefined?1:m;k=k==undefined?1:k;e.maxl=k;e.maxo=m;var s=t.getGame();var o=new i({shape:new a({width:80,height:500,center:[100,300]}),material:f.Iron,dinamic:false});var l=new i({shape:new a({width:80,height:500,center:[600,300]}),material:f.Iron,dinamic:false});var p=new i({shape:new a({width:580,height:80,center:[350,590]}),material:f.Iron,dinamic:false});var r="dataset - max objects-"+m+" - level -"+k;var q={label:r,fillColor:"transparent",strokeColor:b.random(),pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};t.datasets.push(q);t.atualSet=t.datasets.length-1;s.initialize(t.gameOptions);s.start();t.updateChart();s.getWorld().add(o).add(o).add(l).add(p);var n=setInterval(function(){var x=new i({shape:new a({width:10,height:10,center:[300,200]}),material:f.Iron,dinamic:true});s.getWorld().add(x);t.bodiesTest.push(x);$("#obj-qtd").html("qtd: "+t.bodiesTest.length);if(s.getWorld().bodies.length>220){clearInterval(n);s.getWorld().clear();s.pause();t.bodiesTest=[];k++;if(k>5){k=1;m+=1}if(m<=5){var w=0;t.datasets[t.atualSet].data.forEach(function(z){w+=z});var y=Math.round(w/21);t.medias[t.atualSet]=y;t.labels[t.atualSet]=r;console.log(t.labels[t.atualSet]+" checked. average time is "+y);var v=null;var u=null;t.medias.forEach(function(z,A){if(v==null||v>z){v=z;u=A}});$("#best").html("atual best is "+t.labels[u]);t.test(m,k)}else{var v=null;var u=null;t.medias.forEach(function(z,A){if(v==null||v>z){v=z;u=A}});console.log("best is "+t.labels[u]+" with average time "+v)}}},50)};j.prototype.initialize=function(){var k=this;k.test()};return new j()});