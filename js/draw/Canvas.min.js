function Canvas(g){if(null==document.getElementById(g))throw new TypeError("Element canvas doesn't exists");var b=this;b.canvas=g;b.width=MV.toInt($("#"+g).css("width"));b.height=MV.toInt($("#"+g).css("height"));b.context=$("#"+g).get(0).getContext("2d");b.scale=1;b.center=[this.width/2,this.height/2];b.min=[0,0];b.context.setLineDash||(this.context.setLineDash=function(a){});b.drawShape=function(a){a instanceof Body?this.drawBody(a):a instanceof Polygon&&this.drawPolygon(a)};b.drawAABB=function(a){this.context.fillStyle=
    "transparent";this.context.strokeRect(a[0]*this.scale,a[1]*this.scale,(a[2]-a[0])*this.scale,(a[3]-a[1])*this.scale)};b.drawQuadTree=function(a,b){1!=b&&this.clearScreen();this.drawAABB(a.AABB);var c=a.nodes.length,d,e;for(d=0;d<c;d++)e=a.nodes[d],void 0!=e&&0<e.qtd&&this.drawQuadTree(e,!0)};b.drawWorld=function(a){this.clearScreen();var b=a.bodies.length;a=a.bodies;var c;for(c=0;c<b;c++)this.drawShape(a[c])};b.drawCircle=function(a){b.drawArc(a)};b.drawArc=function(a){this.fillShadow(a.shadow);this.fillShape(a);
    this.context.beginPath();this.context.arc(a.center[0],a.center[1],a.radius,Math.PI*a.start/180,Math.PI*a.end/180);this.context.fill();this.fillBorder(a.border)};b.drawPolygon=function(a){var b=a.center,c=a.vertices,d=c.length,e=this.scale;this.context.save();this.context.translate(b[0]*e,b[1]*e);this.context.rotate(a.theta);this.context.beginPath();this.context.moveTo(c[0][0]*e,c[0][1]*e);for(b=1;b<d;b++)this.context.lineTo(c[b][0]*e,c[b][1]*e);this.context.closePath();this.fillShape(a);this.context.fill();
    this.fillShadow(a.shadow);this.fillBorder(a.border);this.context.restore()};this.drawBody=function(a){var b=a.shape,c=a.center;a=b.vertices;var d=this.scale,e=a.length;this.context.save();this.context.translate(c[0]*d,c[1]*d);this.context.rotate(b.theta);this.context.beginPath();this.context.moveTo(a[0][0]*d,a[0][1]*d);for(c=1;c<e;c++)this.context.lineTo(a[c][0]*d,a[c][1]*d);this.context.closePath();this.fillShape(b);this.context.fill();this.fillShadow(b.shadow);this.fillBorder(b.border);this.context.restore()};
    b.clearScreen=function(){b.context.clearRect(b.min[0],b.min[1],b.width,b.height)};b.move=function(a){var b=this.center[0]-a[0],c=this.center[1]-a[1];this.center=a;this.min=[a[0]-this.width/2,a[1]-this.height/2];this.context.translate(b,c)};b.fillGradient=function(a){var f=a.color,c=null,d=a.updateMinAndMax(),c=d.max[0]-d.min[0];a=d.max[1]-d.min[1];var e=c/2,g=a/2,h=d.min[0]+e,d=d.min[1]+g;if(f instanceof RadialGradient)var k=f.r,h=f.cx,d=f.cy,c=b.context.createRadialGradient(h-e+f.fx/100*c,d-g+f.fy/
        100*a,0,h-e+h/100*c,d-g+d/100*a,k/100*c);else c=b.context.createLinearGradient(h-e+f.px0/100*c,d-g+f.py0/100*a,h-e+f.px1/100*c,d-g+f.py1/100*a);a=f.colorsStop.length;for(e=0;e<a;e++)c.addColorStop(f.colorsStop[e][0]/100,b.fillColor(f.colorsStop[e][1]));return c};b.fillColor=function(a){return a instanceof Color?a.toRGBA():a};b.fillShadow=function(a){null!=a&&(b.context.save(),b.context.shadowOffsetX=a.x,b.context.shadowOffsetY=a.y,b.context.shadowBlur=a.blur,b.context.shadowColor=b.fillColor(a.color),
        b.context.fill(),b.context.restore())};b.fillBorder=function(a){null!=a&&(b.context.setLineDash(a.lineDash),b.context.lineCap=a.lineCap,b.context.strokeStyle=b.fillColor(a.color),b.context.lineWidth=a.thickness,b.context.stroke())};b.fillShape=function(a){var f=a.color;b.context.fillStyle=f instanceof LinearGradient||f instanceof RadialGradient?b.fillGradient(a):f instanceof Image?f.getFillPattern(b.context):b.fillColor(f)};b.drawImage=function(a){if(a instanceof Image&&a.loaded){var b=a.getElement(),
        c=a.width,d=a.height;this.context.drawImage(b,a.sx,a.sy,c,d,a.x,a.y,c,d);return!0}}};