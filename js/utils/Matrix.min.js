function Matrix(f,d){this.rows=isNaN(f)?3:parseInt(f);this.cols=isNaN(d)?3:parseInt(d);this.inverse=this.adjunct=this.transpose=this.cofactor=this.determinant=null;this.mat=[];for(var g=0;g<this.rows;g++){this.mat[g]=[];for(var e=0;e<this.cols;e++)this.mat[g][e]=0}this.getValue=function(a,b){if(0<=a&&a<this.rows&&0<=b&&b<this.cols)return this.mat[a][b];throw new TypeError("Indice de matriz inv\u00e1lido:["+a+"]["+b+"]");};this.setValue=function(a,b,c){if(0<=a&&a<this.rows&&0<=b&&b<this.cols){if(isNaN(c))throw new TypeError("O valor passado como par\u00e2metro deve ser um numero");
    this.mat[a][b]=c;this.determinant=null}else throw new TypeError("Indice de matriz inv\u00e1lido:["+a+"]["+b+"]");};this.setRow=function(a,b){if(0<=a&&a<this.rows)if(b instanceof Array&&b.length==this.cols)this.mat[a]=b,this.determinant=null;else throw new TypeError("A quantidade de colunas deve ser a mesma da matriz");else throw new TypeError("Indice de linha invalido["+a+"]");};this.setCol=function(a,b){if(0<=a&&a<this.cols)if(b instanceof Array&&b.length==this.rows){for(var c=0;c<this.mat.length;c++)this.mat[c][a]=
    b[c];this.determinant=null}else throw new TypeError("A quantidade de colunas deve ser a mesma da matriz");else throw new TypeError("Indice de coluna invalido[i]["+a+"]");};this.getRow=function(a){return 0<=a&&a<=this.rows?this.mat[a]:null};this.getCol=function(a){if(0<=a&&a<=this.cols){for(var b=[],c=0;c<this.mat.length;c++)b[c]=this.mat[c][a];return b}return null};this.obterCofator=function(a,b){if(0<=a&&a<this.rows&&0<=b&&b<this.cols)return Math.pow(-1,a+b)*this.obterSubMatriz(a,b).determinant();
    throw new TypeError("Indice inexistente["+a+"]["+b+"]");};this.obterSubMatriz=function(a,b){if(0<=a&&a<this.rows&&0<=b&&b<this.cols){for(var c=this.rows-1,f=new Matrix(c,c),e=0,d=0,g=0;g<this.mat.length;g++)if(g!=a)for(var l=0;l<this.mat[g].length;l++)l!=b&&(f.setValue(e,d,this.mat[g][l]),d++,d==c&&(d=0,e++));return f}throw new TypeError("Indice inexistente["+a+"]["+b+"]");};this.cofactor=function(){if(null==this.cofactor){this.cofactor=new Matrix(this.rows,this.cols);for(var a=0;a<this.rows;a++)for(var b=
    0;b<this.cols;b++)this.cofactor.setValue(a,b,this.obterCofator(a,b))}return this.cofactor};this.transpose=function(){if(null==this.transpose){this.transpose=new Matrix(this.cols,this.rows);for(var a=0;a<this.mat.length;a++){var b=this.getRow(a);this.transpose.setCol(a,b)}}return this.transpose};this.adjunct=function(){null==this.adjunct&&(this.adjunct=this.cofactor().transpose());return this.adjunct};this.inverse=function(){null==this.inverse&&(0!=this.determinant()?this.inverse=Matrix.scale(this.adjunct(),
    1/this.determinant()):console.log("A matriz n\u00e3o possui matriz inversa"));return this.inverse};this.determinant=function(){if(null==this.determinant)if(this.rows==this.cols)this.determinant=1==this.rows?this.getValue(0,0):3>=this.rows?this.determinantBySarrus():this.determinantByLaplace();else throw new TypeError("N\u00e3o \u00e9 possivel calcular a determinate porque a matriz nao e quadrada:"+this.rows+","+this.cols);return this.determinant};this.determinantByLaplace=function(){for(var a=parseInt(Math.floor(Math.random()*
    this.rows)),b=0,c=0;c<this.mat[a].length;c++)b+=this.mat[a][c]*this.obterCofator(a,c);return b};this.determinantBySarrus=function(){var a=0;if(2==this.cols)a=this.getValue(0,0)*this.getValue(1,1)-this.getValue(0,1)*this.getValue(1,0);else for(var b=0;3>b;b++){for(var c=0,f=1,d=b,e=0,g=0;3>g;d++,e++,g++)d=d>=this.cols?0:d,e=e>=this.rows?0:e,f*=this.getValue(e,d);c=f;f=1;d=b;for(g=e=0;3>g;d--,e++,g++)d=0>d?this.cols-1:d,e=e>=this.rows?0:e,f*=this.getValue(e,d);a+=c-f}return a};this.load=function(a){for(g in a)for(e in a[g])this.setValue(g,
    e,a[g][e])};this.toString=function(){for(var a="",b=0;b<this.mat.length;b++)for(var a=a+"\n",c=0;c<this.mat[b].length;c++)a+="["+this.getValue(b,c)+"]";return a}}Matrix.sum=function(f,d){if(f instanceof Matrix&&d instanceof Matrix&&f.rows==d.rows&&f.cols==d.cols){var g=f.rows,e=d.cols,a=new Matrix(g,e),b,c;for(b=0;b<g;b++)for(c=0;c<e;c++)a.setValue(b,c,f.getValue(b,c)+d.getValue(b,c));return a}return null};
Matrix.subtrair=function(f,d){if(f instanceof Matrix&&d instanceof Matrix&&f.rows==d.cols&&f.rows==d.cols){var g=f.rows,e=d.cols,a=new Matrix(g,e),b,c;for(b=0;b<g;b++)for(c=0;c<e;c++)a.setValue(b,c,f.getValue(b,c)-d.getValue(b,c));return a}return null};Matrix.scale=function(f,d){if(f instanceof Matrix&&!isNaN(d)){var g=new Matrix(f.rows,f.cols),e,a;for(e=0;e<f.rows;e++)for(a=0;a<f.cols;a++)g.setValue(e,a,f.getValue(e,a)*d);return g}return null};
Matrix.multiplicarMatrizes=function(f,d){if(f instanceof Matrix&&d instanceof Matrix&&f.cols==d.rows){var g=new Matrix(f.rows,d.cols),e,a,b,c,k=0,h;for(e=0;e<f.rows;e++)for(a=0;a<d.cols;a++){b=f.getRow(e);c=d.getCol(a);for(h=k=0;h<b.length;h++)k+=b[h]*c[h];g.setValue(e,a,k)}return g}return null};